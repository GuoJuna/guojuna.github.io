(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{725:function(t,n,s){"use strict";s.r(n);var e=s(0),l=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("ol",[n("li",[n("p",[n("em",[n("strong",[t._v("【强制】")])]),t._v(" 在表查询中，一律不要使用 * 作为查询的字段列表，需要哪些字段必须明确写明。\n说明： 1 ）增加查询分析器解析成本。 2 ）增减字段容易与resultMap配置不一致。 3 ）无用字段增加网络\n消耗，尤其是text类型的字段。")])]),t._v(" "),n("li",[n("p",[n("em",[n("strong",[t._v("【强制】")])]),t._v(" POJO类的布尔属性不能加is，而数据库字段必须加is_，要求在resultMap中进行\n字段与属性之间的映射。\n说明：参见定义POJO类以及数据库字段定义规定，在sql.xml增加映射，是必须的。")])]),t._v(" "),n("li",[n("p",[n("em",[n("strong",[t._v("【强制】")])]),t._v(" 不要用resultClass当返回参数，即使所有类属性名与数据库字段一一对应，也需要\n定义<resultMap>；反过来，每一个表也必然有一个<resultMap>与之对应。\n说明：配置映射关系，使字段与DO类解耦，方便维护。")])]),t._v(" "),n("li",[n("p",[n("em",[n("strong",[t._v("【强制】")])]),t._v(" sql.xml配置参数使用：#{}，#param# 不要使用${} 此种方式容易出现SQL注入。")])]),t._v(" "),n("li",[n("p",[n("em",[n("strong",[t._v("【强制】")])]),t._v(' iBATIS自带的queryForList(String statementName,int start,int size)不推荐使用。\n说明：其实现方式是在数据库取到statementName对应的SQL语句的所有记录，再通过subList取\nstart,size的子集合。\n正例：\nMap<String, Object> map = new HashMap<>( 16 );\nmap.put("start", start);\nmap.put("size", size);')])]),t._v(" "),n("li",[n("p",[n("em",[n("strong",[t._v("【强制】")])]),t._v(" 不允许直接拿HashMap与Hashtable作为查询结果集的输出。\n反例：某同学为避免写一个<resultMap>xxx</resultMap>，直接使用HashTable来接收数据库返回结\n果，结果出现日常是把bigint转成Long值，而线上由于数据库版本不一样，解析成BigInteger，导致线\n上问题。")])]),t._v(" "),n("li",[n("p",[n("em",[n("strong",[t._v("【强制】")])]),t._v(" 更新数据表记录时，必须同时更新记录对应的update_time字段值为当前时间。")])]),t._v(" "),n("li",[n("p",[t._v("【推荐】不要写一个大而全的数据更新接口。传入为POJO类，不管是不是自己的目标更新字\n段，都进行update table set c1=value1,c2=value2,c3=value3; 这是不对的。执行SQL时，\n不要更新无改动的字段，一是易出错；二是效率低；三是增加binlog存储。")])]),t._v(" "),n("li",[n("p",[t._v("【参考】@Transactional事务不要滥用。事务会影响数据库的QPS，另外使用事务的地方需\n要考虑各方面的回滚方案，包括缓存回滚、搜索引擎回滚、消息补偿、统计修正等。")])]),t._v(" "),n("li",[n("p",[t._v("【参考】<isEqual>中的compareValue是与属性值对比的常量，一般是数字，表示相等时\n带上此条件；<isNotEmpty>表示不为空且不为null时执行；<isNotNull>表示不为null值\n时执行。")])])])])}),[],!1,null,null,null);n.default=l.exports}}]);